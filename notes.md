# 点灯

### 思路

- 递归遍历法

    1. 初始化所有节点，完成更新动作
    1. 顺序递归遍历剩余节点，每层尝试更新方案
    1. 所有节点处理完毕后，顺序递归处理剩余空格，每层尝试方案

- 最优解法

    1. 定义以下操作

        - 操作1: 更新动作（完成当前状态下所有等价的动作）

            1. 对于节点

                > - 未完成的节点，四周已选中的空白块数量等于节点数字
                >
                >     > 更新节点状态及四周其余空白块的状态
                >
                > - 四周可用空白数量小于节点数字时，抛出异常
                >
                > - 四周可用空白数量等于节点数字时，选择上述空白区域
                >
                > - 否则，对于可知的状态，根据逻辑禁用节点四角的空白块
                >
                >     - total=0 : 禁用周围四个空白块
                >     
                >     - total=1，rest=2
                >         - rest两点 为垂直角度： 禁用两点所夹的空白块
                >         - rest两点 为水平角度：无动作
                >     - total=1，rest=3：无动作
                >     - total=1，rest=4：无动作
                >     - total=2，rest=3：禁用三点所夹的两个空白块
            >     - total=2，rest=4：无动作
                >     - total=3，rest=4：禁用四点所夹的四个空白块

            1. 对于空白块（未做标记的空白点）

                > 若不存在与方块连通的其他空白块，则直接选中当前方块

            1. 对于禁用块（被标记为禁用的空白点）
    
                > 若仅存在一个与方块连通的空白块，则直接选中该空白块
            >
                > 若不存在与方块连通的空白块，则抛出异常

            1. 将上述更新动作中的操作 影响到的(以下情况)节点与方块加入**更新队列**
    
                > - ~~选中动作导致的四个方向上，被禁用的空白块，两侧(或三侧)的未完成的节点~~
                > - 被点亮的空白块，四周(2/3侧)未完成的节点
                > - 被点亮的空白块，四个方向上(2个方向)可连通的，未被点亮的空白块
            > - 被禁用的空白块，四周未完成的节点
                > - 被禁用的空白块，四个方向上可连通的，未被点亮的空白块

        - 操作2: 选择动作（对于某元素，列出所有方案以进行递归尝试）

            1. 对于节点

                > 列出节点对应的所有方案，递归所有方案

            1. 对于空白块

                > 具有 选择/不选择 两个方案

            1. ~~对于禁用块~~

    1. 遍历所有节点，完成对节点的更新动作

    1. 遍历更新队列，对队列中的元素进行更新，直到队列为空

    1. 选择任意未完成的元素，递归所有方案，尝试对元素进行更新
    
    - 过程中存在多重元素递归，是解法速度瓶颈
        - 更新动作抛出异常则说明不符合答案，尝试下一个方案，或抛出错误到上层

    1. 遍历更新队列，对队列中的元素进行更新，直到队列为空
    
    1. 重复步骤 4-5，直到完成所有元素，得到答案



### 解决方案



### 优化点

1. 对于剩余的未解决区域，可根据连通性，分区域处理解决方案







